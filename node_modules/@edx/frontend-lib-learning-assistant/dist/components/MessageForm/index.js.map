{"version":3,"file":"index.js","names":["_propTypes","_interopRequireDefault","require","_react","_interopRequireWildcard","_reactRedux","_paragon","_icons","_thunks","_jsxRuntime","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","MessageForm","_ref","courseId","shouldAutofocus","apiIsLoading","currentMessage","apiError","useSelector","state","learningAssistant","dispatch","useDispatch","inputRef","useRef","useEffect","current","focus","handleSubmitMessage","event","preventDefault","acknowledgeDisclosure","addChatMessage","getChatResponse","handleUpdateCurrentMessage","updateCurrentMessage","target","value","getSubmitButton","jsx","Button","disabled","onClick","size","variant","children","Icon","src","Send","Form","className","onSubmit","Group","Control","floatingLabel","onChange","trailingElement","ref","propTypes","PropTypes","string","isRequired","bool","defaultProps","_default","exports"],"sources":["../../../src/components/MessageForm/index.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport React, { useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { Button, Form, Icon } from '@edx/paragon';\nimport { Send } from '@edx/paragon/icons';\n\nimport {\n  acknowledgeDisclosure,\n  addChatMessage,\n  getChatResponse,\n  updateCurrentMessage,\n} from '../../data/thunks';\n\nconst MessageForm = ({ courseId, shouldAutofocus }) => {\n  const { apiIsLoading, currentMessage, apiError } = useSelector(state => state.learningAssistant);\n  const dispatch = useDispatch();\n  const inputRef = useRef();\n\n  useEffect(() => {\n    if (inputRef.current && !apiError && !apiIsLoading && shouldAutofocus) {\n      inputRef.current.focus();\n    }\n  }, [apiError, apiIsLoading, shouldAutofocus]);\n\n  const handleSubmitMessage = (event) => {\n    event.preventDefault();\n    if (currentMessage) {\n      dispatch(acknowledgeDisclosure(true));\n      dispatch(addChatMessage('user', currentMessage, courseId));\n      dispatch(getChatResponse(courseId));\n    }\n  };\n\n  const handleUpdateCurrentMessage = (event) => {\n    dispatch(updateCurrentMessage(event.target.value));\n  };\n\n  const getSubmitButton = () => (\n    <Button\n      aria-label=\"submit\"\n      disabled={apiIsLoading}\n      onClick={handleSubmitMessage}\n      size=\"inline\"\n      variant=\"tertiary\"\n    >\n      <Icon src={Send} />\n    </Button>\n  );\n\n  return (\n    <Form className=\"w-100 pl-2\" onSubmit={handleSubmitMessage}>\n      <Form.Group>\n        <Form.Control\n          data-hj-suppress\n          disabled={apiIsLoading}\n          floatingLabel=\"Write a message\"\n          onChange={handleUpdateCurrentMessage}\n          trailingElement={getSubmitButton()}\n          value={currentMessage}\n          ref={inputRef}\n        />\n      </Form.Group>\n    </Form>\n  );\n};\n\nMessageForm.propTypes = {\n  courseId: PropTypes.string.isRequired,\n  shouldAutofocus: PropTypes.bool,\n};\n\nMessageForm.defaultProps = {\n  shouldAutofocus: false,\n};\n\nexport default MessageForm;\n"],"mappings":"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"}